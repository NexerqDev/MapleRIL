<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>MapleRIL - @Model.Title</title>

    <link href="/Static/dist/css/bootstrap.flatly.min.css" rel="stylesheet" />
    <link href="/Static/css/style.css" rel="stylesheet" />

    <script>
        window.MapleRIL = {
            regions: @Model.Regions
        };
    </script>
    @Section['HeadData']
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <a class="navbar-brand" href="/">
            <img src="/Static/assets/logo.png" />
            MapleRIL
        </a>

        <div class="collapse navbar-collapse" id="navbarColor01">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/">Home</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">About</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Contact</a>
                </li>
            </ul>
            <div class="form-inline my-2 my-lg-0">
                <input id="topbar-search-input" class="form-control mr-sm-2" type="text" placeholder="Search">
                <select id="topbar-search-region" class="form-control mr-sm-2"></select>
                <button class="btn btn-secondary my-2 my-sm-0" type="button" onclick="redirSearch()">Search</button>
            </div>
        </div>
    </nav>

    <div class="container">
        @Section['Content']
    </div>

    <footer class="footer">
        <div class="container">
            <div class="text-muted text-center">
                made with &lt;3 by <a href="https://twitter.com/@_nexerq">@_nexerq</a><br />
                MapleStory and related trademarks are (c) Nexon Corporation and this website is completely a fan-made website and has no affiliation with Nexon.
            </div>
        </div>
    </footer>


    <script>
        // cbs using vue for this basic stuff around the place
        // just a redir anyway

        // add regions
        for (var i = 0; i < window.MapleRIL.regions.length; ++i) {
            var selectElem = document.getElementById('topbar-search-region');
            var region = window.MapleRIL.regions[i];
            selectElem.options[selectElem.length] = new Option(`${region.region} (${region.version})`, region.region);
        }
        document.getElementById('topbar-search-region').value = window.MapleRIL.regions[0].region;

        // attach enter
        document.getElementById('topbar-search-input').addEventListener('keyup', function (e) {
            e.preventDefault();
            if (e.keyCode === 13)
                redirSearch();
        });

        function redirSearch() {
            var elem = document.getElementById('topbar-search-input');
            var selectElem = document.getElementById('topbar-search-region');
            if (!elem.value)
                return;
            window.location.href = `/search?q=${elem.value}&region=${selectElem.value}`;
        }
    </script>
    @Section['BodyEndData']
</body>
</html>
